(function(a){function b(a){return"object"==typeof a?a:{top:a,left:a}}var d=a.scrollTo=function(b,d,e){a(window).scrollTo(b,d,e)};d.defaults={axis:"xy",duration:1.3<=parseFloat(a.fn.jquery)?0:1,limit:!0};d.window=function(b){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var b=(this.contentWindow||this).document||this.ownerDocument||this;return/webkit/i.test(navigator.userAgent)||
"BackCompat"==b.compatMode?b.body:b.documentElement})};a.fn.scrollTo=function(c,f,e){"object"==typeof f&&(e=f,f=0);"function"==typeof e&&(e={onAfter:e});"max"==c&&(c=9E9);e=a.extend({},d.defaults,e);f=f||e.duration;e.queue=e.queue&&1<e.axis.length;e.queue&&(f/=2);e.offset=b(e.offset);e.over=b(e.over);return this._scrollable().each(function(){function l(a){n.animate(g,f,e.easing,a&&function(){a.call(this,c,e)})}if(null!=c){var m=this,n=a(m),k=c,g={},t=n.is("html,body");switch(typeof k){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(k)){k=
b(k);break}k=a(k,this);if(!k.length)return;case "object":if(k.is||k.style)var p=(k=a(k)).offset()}a.each(e.axis.split(""),function(a,b){var c="x"==b?"Left":"Top",f=c.toLowerCase(),h="scroll"+c,q=m[h],r=d.max(m,b);p?(g[h]=p[f]+(t?0:q-n.offset()[f]),e.margin&&(g[h]-=parseInt(k.css("margin"+c))||0,g[h]-=parseInt(k.css("border"+c+"Width"))||0),g[h]+=e.offset[f]||0,e.over[f]&&(g[h]+=k["x"==b?"width":"height"]()*e.over[f])):(c=k[f],g[h]=c.slice&&"%"==c.slice(-1)?parseFloat(c)/100*r:c);e.limit&&/^\d+$/.test(g[h])&&
(g[h]=0>=g[h]?0:Math.min(g[h],r));!a&&e.queue&&(q!=g[h]&&l(e.onAfterFirst),delete g[h])});l(e.onAfter)}}).end()};d.max=function(b,d){var c="x"==d?"Width":"Height",f="scroll"+c;if(!a(b).is("html,body"))return b[f]-a(b)[c.toLowerCase()]();c="client"+c;var m=b.ownerDocument.documentElement,n=b.ownerDocument.body;return Math.max(m[f],n[f])-Math.min(m[c],n[c])}})(jQuery);
(function(a){a.fn.endlessScroll_horizontal=function(b){b=a.extend({},{bottomPixels:50,fireOnce:!0,fireDelay:150,loader:"<br />Loading...<br />",data:"",insertAfter:"div:last",resetCounter:function(){return!1},callback:function(){return!0},ceaseFire:function(){return!1},intervalFrequency:250},b);var d=!0,c=!1,f=0,e=!1,l=this,m="";a(".endless_scroll_inner_wrap",this);var n;a(this).scroll(function(){e=!0;l=this;m=a(l).attr("id")});setInterval(function(){e&&!0===d&&(e=!1,!0===b.ceaseFire.apply(l,[f])?
d=!1:(n=l==document||l==window?a(document).width()-a(window).width()<=a(window).scrollLeft()+b.bottomPixels:jQuery(l).scrollLeft()+jQuery(l).width()>jQuery(l)[0].scrollWidth-b.bottomPixels)&&(0==b.fireOnce||1==b.fireOnce&&1!=c)&&(!0===b.resetCounter.apply(l)&&(f=0),c=!0,f++,a(b.insertAfter).after('<div class="endless_scroll_loader_'+m+' endless_scroll_loader">'+b.loader+"</div>"),data="function"==typeof b.data?b.data.apply(l,[f]):b.data,!1!==data&&(a(b.insertAfter).after('<div id="endless_scroll_data">'+
data+"</div>"),a("#endless_scroll_data").hide().fadeIn(250,function(){a(this).removeAttr("id")}),b.callback.apply(l,[f]),!1!==b.fireDelay||0!==b.fireDelay?(a("body").after('<div id="endless_scroll_marker"></div>'),a("#endless_scroll_marker").fadeTo(b.fireDelay,1,function(){a(this).remove();c=!1})):c=!1),a(".endless_scroll_loader_"+m).fadeOut(function(){a(this).remove()})))},b.intervalFrequency)}})(jQuery);var in_callback=!1,cease_fire=!1,last_photo_id=void 0,first_endless_load=!0;
function endless_scroll_callback(){if(1!=in_callback){in_callback=!0;last_photo_id=jQuery("#white_slider_listing_actual_container img:not(.blank):last").attr("photo_id");"undefined"==last_photo_id&&(last_photo_id=0);var a=jQuery("#white_slider_listing_actual_container").attr("data-gallery_id"),b=jQuery("#white_slider_listing_actual_container").attr("data-max_gallery_images"),d=jQuery("#white_slider_listing_actual_container").attr("data-image_data_layout");"string"!=typeof d&&(d="basic_image_data");
jQuery.ajax({type:"post",url:"/photo_galleries/ajax_get_gallery_photos_after/"+a+"/"+last_photo_id+"/"+b+"/"+d,data:{},success:function(a){jQuery(document).unbind("images_loaded");jQuery(document).unbind("image_load_progress");first_endless_load?first_endless_load=!1:(jQuery("#image_slider_progressbar_container").show(),jQuery("#image_slider_progressbar").progressbar("value",5));var b=jQuery(a.large_html),c=jQuery(a.small_html);setup_image_clicks(c);setup_large_image_clicks(b.filter("img"));var d=
jQuery(c).add(b).filter("img");0<d.size()?(jQuery(document).bind("images_loaded",function(a){jQuery("#image_slider_progressbar_container").stop().fadeOut(1E3)}),jQuery(document).bind("image_load_progress",function(a,b){jQuery("#image_slider_progressbar").progressbar("value",b)}),jQuery("#white_slider_listing_actual_container img.blank:last").before(b),jQuery("#white_slider_scroll_control_inner img.blank:last").before(c),jQuery(document).trigger("preload_images_for_progress",[d]),b=jQuery(a.photo_data_html),
jQuery("#white_slider_ecommerce_container").append(b)):jQuery("#image_slider_progressbar_container").stop().fadeOut(1E3);0==a.has_more&&(cease_fire=!0)},complete:function(a,b){in_callback=!1},error:function(){jQuery("#image_slider_progressbar_container").stop().hide()},dataType:"json"})}}
function get_current_middle_image(){var a=jQuery(document).width()/2,b=void 0,d=void 0;jQuery("#white_slider_listing_actual_container img:not(.blank)").each(function(){var c=jQuery(this).offset().left+jQuery(this).width()/2,f=jQuery(this).offset().left,e=jQuery(this).offset().left+jQuery(this).width();if(f<=a&&e>=a)return b=jQuery(this),d={},d.current_middle_image=b,d.current_middle=c,!1});return d}
function move_to_next_prev_image(a){"left"!=a&&"right"!=a&&(a="right");var b=jQuery(document).width()/2,d=get_current_middle_image(),c=void 0;if("undefined"!=typeof d){c=Math.abs(b-d.current_middle);var f=.1*d.current_middle_image.width();c="right"==a?d.current_middle>b&&c>f?d.current_middle_image:d.current_middle_image.next():d.current_middle<b&&c>f?d.current_middle_image:d.current_middle_image.prev()}if("undefined"==typeof c||"undefined"==c.attr("photo_id"))c="right"==a?jQuery("#white_slider_listing_actual_container img:not(.blank)").last():
jQuery("#white_slider_listing_actual_container img:not(.blank)").first();"undefined"!=c&&0<c.length&&!c.hasClass("blank")&&(a=jQuery("#white_slider_listing_actual_container").scrollLeft()+c.offset().left+c.width()/2,b=Math.round(a-b),jQuery("#white_slider_listing_actual_container").scrollLeft(b),calculate_scroll_control_div_width_and_pos(),calculate_control_container_scroll(),!1===cease_fire&&(a=jQuery("#white_slider_listing_actual_container img:not(.blank)").last(),b=(d="undefined"!=a&&0<a.length)&&
a[0]===c[0],f=!1,d&&(a=a.prev(":not(.blank)"),f="undefined"!=a&&0<a.length&&a[0]===c[0]),(b||f)&&endless_scroll_callback()))}function calculate_scroll_control_div_width(){var a=jQuery(window).width()/10;jQuery("#white_slider_scroll_control_inner .scroll_control_div").width(a)}
function calculate_scroll_control_div_pos(){var a=jQuery("#white_slider_listing_actual_container");scrollPercent=a.scrollLeft()/a[0].scrollWidth*100;a=jQuery("#white_slider_scroll_control_inner").width()*(scrollPercent/100);jQuery("#white_slider_scroll_control_inner .scroll_control_div").css("left",a);calculate_ecommerce_display_and_opacity()}function calculate_scroll_control_div_width_and_pos(){calculate_scroll_control_div_pos();calculate_scroll_control_div_width()}
function calculate_slider_scroll_position(){var a=jQuery("#white_slider_scroll_control_inner .scroll_control_div"),b=a.position().left;a=a.parent().width();b=b/a*100;a=jQuery("#white_slider_listing_actual_container");a.scrollLeft(Math.round(b/100*a[0].scrollWidth));calculate_ecommerce_display_and_opacity()}
function calculate_control_container_scroll(){var a=jQuery("#white_slider_scroll_control"),b=jQuery("#white_slider_scroll_control_inner .scroll_control_div");0<b.length&&(a.stop(!0),b=b.position().left+b.width()/2-a.width()/2,0>b&&(b=0),b>a[0].scrollWidth-a.width()&&(b=a[0].scrollWidth-a.width()),a.scrollTo(b+"px",{axis:"x",duration:500}))}
function setup_image_clicks(a){jQuery(a).click(function(){var a=jQuery("#white_slider_scroll_control_inner .scroll_control_div"),d=jQuery(this).position().left+jQuery(this).width()/2-a.width()/2;a.css("left",d);calculate_slider_scroll_position();calculate_control_container_scroll()})}function setup_large_image_clicks(a){jQuery(a).click(function(){var a=jQuery(this).attr("photo_id");go_to_this_image(a)})}
function go_to_this_image(a){a=jQuery("#white_slider_listing_actual_container img[photo_id="+a+"]");void 0!==a&&go_to_this_image_element(a)}function go_to_this_image_element(a){var b=jQuery("#white_slider_listing_actual_container");a=a.position().left+a.width()/2;a=b.width()/2-a;b.scrollLeft(b.scrollLeft()-a);calculate_scroll_control_div_width_and_pos()}
function calculate_ecommerce_display_and_opacity(){var a=jQuery(document).width()/2,b=get_current_middle_image();if(void 0!=b){var d=b.current_middle_image.width(),c=b.current_middle_image.attr("photo_id");b=b.current_middle_image.position().left+d/2;d=Math.abs(a-b)/(d/2);1<d?(a=!0,d=0):0<d?(a=!0,d=1-(d-0)/1):(a=!0,d=100);1==a?(c="#image_data_container_"+c+", #current_image_linepointer_container",jQuery(".image_data_container").not(c).hide(),jQuery(c).show().fadeTo(0,d)):jQuery(".image_data_container, #current_image_linepointer_container").hide()}}
jQuery(document).ready(function(){jQuery("#image_slider_progressbar").progressbar({value:5});jQuery("#left_arrow").click(function(){move_to_next_prev_image("left")});jQuery("#right_arrow").click(function(){move_to_next_prev_image("right")});jQuery("#white_slider_scroll_control_inner .scroll_control_div").draggable({axis:"x",containment:"parent",scroll:!1,start:function(a,b){autoscrolling=!0},drag:function(a,b){var d=jQuery("#white_slider_scroll_control"),c=jQuery("#white_slider_scroll_control_inner .scroll_control_div");
d.stop(!0);c.stop(!0);calculate_slider_scroll_position()},stop:function(){autoscrolling=!1;calculate_control_container_scroll()}});jQuery(document).bind("images_loaded",function(a){setup_image_clicks("#white_slider_scroll_control_inner img:not(.blank)");setup_large_image_clicks("#white_slider_listing_actual_container img:not(.blank)");jQuery("#image_slider_progressbar_container").hide();jQuery("#entire_slider_hider").fadeTo(1E3,0,function(){jQuery(this).hide()});jQuery("#white_slider_listing_actual_container").endlessScroll_horizontal({bottomPixels:1200,
loader:"",insertAfter:"",callback:function(a){endless_scroll_callback()},ceaseFire:function(){return cease_fire}})});jQuery(document).bind("image_load_progress",function(a,b){jQuery("#image_slider_progressbar").progressbar("value",b)});jQuery(document).trigger("preload_images_for_progress")});
jQuery(window).load(function(){0<jQuery("#white_slider_listing_actual_container").length&&(jQuery("#white_slider_listing_actual_container").scrollLeft(Math.round(.4*jQuery("#white_slider_listing_actual_container")[0].scrollWidth)),move_to_next_prev_image("right"),move_to_next_prev_image("left"))}).resize(function(){calculate_scroll_control_div_width_and_pos()}); 
