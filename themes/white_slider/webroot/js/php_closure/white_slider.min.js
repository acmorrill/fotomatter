(function(a){function b(a){return"object"==typeof a?a:{top:a,left:a}}var f=a.scrollTo=function(b,f,c){a(window).scrollTo(b,f,c)};f.defaults={axis:"xy",duration:1.3<=parseFloat(a.fn.jquery)?0:1,limit:!0};f.window=function(b){return a(window)._scrollable()};a.fn._scrollable=function(){return this.map(function(){if(this.nodeName&&-1==a.inArray(this.nodeName.toLowerCase(),["iframe","#document","html","body"]))return this;var b=(this.contentWindow||this).document||this.ownerDocument||this;return/webkit/i.test(navigator.userAgent)||
"BackCompat"==b.compatMode?b.body:b.documentElement})};a.fn.scrollTo=function(e,d,c){"object"==typeof d&&(c=d,d=0);"function"==typeof c&&(c={onAfter:c});"max"==e&&(e=9E9);c=a.extend({},f.defaults,c);d=d||c.duration;c.queue=c.queue&&1<c.axis.length;c.queue&&(d/=2);c.offset=b(c.offset);c.over=b(c.over);return this._scrollable().each(function(){function m(a){n.animate(g,d,c.easing,a&&function(){a.call(this,e,c)})}if(null!=e){var k=this,n=a(k),l=e,p,g={},t=n.is("html,body");switch(typeof l){case "number":case "string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(l)){l=
b(l);break}l=a(l,this);if(!l.length)return;case "object":if(l.is||l.style)p=(l=a(l)).offset()}a.each(c.axis.split(""),function(a,b){var e="x"==b?"Left":"Top",d=e.toLowerCase(),h="scroll"+e,q=k[h],r=f.max(k,b);p?(g[h]=p[d]+(t?0:q-n.offset()[d]),c.margin&&(g[h]-=parseInt(l.css("margin"+e))||0,g[h]-=parseInt(l.css("border"+e+"Width"))||0),g[h]+=c.offset[d]||0,c.over[d]&&(g[h]+=l["x"==b?"width":"height"]()*c.over[d])):(e=l[d],g[h]=e.slice&&"%"==e.slice(-1)?parseFloat(e)/100*r:e);c.limit&&/^\d+$/.test(g[h])&&
(g[h]=0>=g[h]?0:Math.min(g[h],r));!a&&c.queue&&(q!=g[h]&&m(c.onAfterFirst),delete g[h])});m(c.onAfter)}}).end()};f.max=function(b,d){var c="x"==d?"Width":"Height",f="scroll"+c;if(!a(b).is("html,body"))return b[f]-a(b)[c.toLowerCase()]();var c="client"+c,k=b.ownerDocument.documentElement,n=b.ownerDocument.body;return Math.max(k[f],n[f])-Math.min(k[c],n[c])}})(jQuery);
(function(a){a.fn.endlessScroll_horizontal=function(b){b=a.extend({},{bottomPixels:50,fireOnce:!0,fireDelay:150,loader:"<br />Loading...<br />",data:"",insertAfter:"div:last",resetCounter:function(){return!1},callback:function(){return!0},ceaseFire:function(){return!1},intervalFrequency:250},b);var f=!0,e=!1,d=0,c=!1,m=this,k="";a(".endless_scroll_inner_wrap",this);var n;a(this).scroll(function(){c=!0;m=this;k=a(m).attr("id")});setInterval(function(){c&&!0===f&&(c=!1,!0===b.ceaseFire.apply(m,[d])?
f=!1:(n=m==document||m==window?a(document).width()-a(window).width()<=a(window).scrollLeft()+b.bottomPixels:jQuery(m).scrollLeft()+jQuery(m).width()>jQuery(m)[0].scrollWidth-b.bottomPixels)&&(0==b.fireOnce||1==b.fireOnce&&1!=e)&&(!0===b.resetCounter.apply(m)&&(d=0),e=!0,d++,a(b.insertAfter).after('<div class="endless_scroll_loader_'+k+' endless_scroll_loader">'+b.loader+"</div>"),data="function"==typeof b.data?b.data.apply(m,[d]):b.data,!1!==data&&(a(b.insertAfter).after('<div id="endless_scroll_data">'+
data+"</div>"),a("#endless_scroll_data").hide().fadeIn(250,function(){a(this).removeAttr("id")}),b.callback.apply(m,[d]),!1!==b.fireDelay||0!==b.fireDelay?(a("body").after('<div id="endless_scroll_marker"></div>'),a("#endless_scroll_marker").fadeTo(b.fireDelay,1,function(){a(this).remove();e=!1})):e=!1),a(".endless_scroll_loader_"+k).fadeOut(function(){a(this).remove()})))},b.intervalFrequency)}})(jQuery);var in_callback=!1,cease_fire=!1,last_photo_id=void 0;
function endless_scroll_callback(){1!=in_callback&&(jQuery("#white_slider_listing_actual_container_loading").stop().fadeIn(),in_callback=!0,void 0==last_photo_id&&(last_photo_id=jQuery("#white_slider_listing_actual_container img:not(.blank):last").attr("photo_id")),void 0==last_photo_id&&(last_photo_id=0),jQuery.ajax({type:"post",url:"/photo_galleries/ajax_get_gallery_photos_after/<?php echo $gallery_id; ?>/"+last_photo_id+"/",data:{},success:function(a){var b=jQuery(a.large_html),f=jQuery(a.small_html);
setup_image_clicks(f);jQuery("#white_slider_listing_actual_container img.blank:last").before(b);jQuery("#white_slider_scroll_control_inner img.blank:last").before(f);0==a.has_more&&(cease_fire=!0)},complete:function(a,b){jQuery("#white_slider_listing_actual_container_loading").stop().fadeOut(2E3)},error:function(){},dataType:"json"}))}
function move_to_next_prev_image(a){"left"!=a&&"right"!=a&&(a="right");var b=jQuery(document).width()/2,f=void 0,e=void 0;jQuery("#white_slider_listing_actual_container img:not(.blank)").each(function(){var c=jQuery(this).offset().left+jQuery(this).width()/2,d=jQuery(this).offset().left,k=jQuery(this).offset().left+jQuery(this).width();d<=b&&k>=b&&(f=jQuery(this),d=Math.abs(b-c),k=.1*f.width(),e="right"==a?c>b&&d>k?f:f.next():c<b&&d>k?f:f.prev())});void 0==e&&(e="right"==a?jQuery("#white_slider_listing_actual_container img:not(.blank)").first():
jQuery("#white_slider_listing_actual_container img:not(.blank)").last());if(void 0!=e&&0<e.length&&!e.hasClass("blank")){var d=jQuery("#white_slider_listing_actual_container").scrollLeft()+e.offset().left+e.width()/2,d=Math.round(d-b);jQuery("#white_slider_listing_actual_container").scrollLeft(d);calculate_scroll_control_div_width_and_pos();calculate_control_container_scroll()}}
function calculate_scroll_control_div_width(){var a=jQuery(window).width()/10;jQuery("#white_slider_scroll_control_inner .scroll_control_div").width(a)}function calculate_scroll_control_div_pos(){var a=jQuery("#white_slider_listing_actual_container");scrollPercent=a.scrollLeft()/a[0].scrollWidth*100;a=jQuery("#white_slider_scroll_control_inner").width()*(scrollPercent/100);jQuery("#white_slider_scroll_control_inner .scroll_control_div").css("left",a)}
function calculate_scroll_control_div_width_and_pos(){calculate_scroll_control_div_pos();calculate_scroll_control_div_width()}function calculate_slider_scroll_position(){var a=jQuery("#white_slider_scroll_control_inner .scroll_control_div"),b=a.position().left,a=a.parent().width(),a=b/a*100,b=jQuery("#white_slider_listing_actual_container"),a=Math.round(a/100*b[0].scrollWidth);b.scrollLeft(a)}
function calculate_control_container_scroll(){var a=jQuery("#white_slider_scroll_control"),b=jQuery("#white_slider_scroll_control_inner .scroll_control_div");a.stop(!0);b=b.position().left+b.width()/2-a.width()/2;0>b&&(b=0);b>a[0].scrollWidth-a.width()&&(b=a[0].scrollWidth-a.width());a.scrollTo(b+"px",{axis:"x",duration:500})}
function setup_image_clicks(a){jQuery(a).click(function(){var a=jQuery("#white_slider_scroll_control_inner .scroll_control_div"),f=jQuery(this).position().left+jQuery(this).width()/2-a.width()/2;a.css("left",f);calculate_slider_scroll_position();calculate_control_container_scroll()})}
jQuery(document).ready(function(){jQuery("#white_slider_listing_actual_container").scrollLeft(Math.round(.4*jQuery("#white_slider_listing_actual_container")[0].scrollWidth));move_to_next_prev_image("right");jQuery("#white_slider_listing_actual_container").endlessScroll_horizontal({bottomPixels:2E3,loader:"",insertAfter:"",callback:function(a){endless_scroll_callback()}});jQuery("#left_arrow").click(function(){move_to_next_prev_image("left")});jQuery("#right_arrow").click(function(){move_to_next_prev_image("right")});
jQuery("#white_slider_scroll_control_inner .scroll_control_div").draggable({axis:"x",containment:"parent",scroll:!1,start:function(a,b){autoscrolling=!0},drag:function(a,b){var f=jQuery("#white_slider_scroll_control"),e=jQuery("#white_slider_scroll_control_inner .scroll_control_div");f.stop(!0);e.stop(!0);calculate_slider_scroll_position()},stop:function(){autoscrolling=!1;calculate_control_container_scroll()}});jQuery("#image_slider_progressbar").progressbar({value:0,complete:function(a,b){jQuery(this).progressbar("destroy").hide();
jQuery("#entire_slider_hider").fadeTo(1E3,0,function(){jQuery(this).hide()})}});jQuery(document).bind("images_loaded",function(a){setup_image_clicks("#white_slider_scroll_control_inner img:not(.blank)")});jQuery(document).bind("image_load_progress",function(a,b){jQuery("#image_slider_progressbar").progressbar("value",b)});jQuery(document).trigger("preload_images_for_progress")});jQuery(window).load(function(){}).resize(function(){calculate_scroll_control_div_width_and_pos()}); 
